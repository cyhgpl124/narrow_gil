# .github/workflows/deploy.yml
name: Deploy Flutter Web to GitHub Pages

# main ë¸Œëœì¹˜ì— push ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œë§Œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    permissions:
      contents: write
    # ì‹¤í–‰ í™˜ê²½ì„ ìµœì‹  ìš°ë¶„íˆ¬ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
    runs-on: ubuntu-latest

    steps:
      # 1. ì €ì¥ì†Œ ì½”ë“œë¥¼ ì²´í¬ì•„ì›ƒí•©ë‹ˆë‹¤.
      - name: Checkout
        uses: actions/checkout@v4

      # 2. Flutter SDKë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
      - name: Set up Flutter
        uses: subosito/flutter-action@v2
        with:
          channel: 'stable'

      # 3. Flutter ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.
      - name: Install dependencies
        run: flutter pub get

      # 4. Flutter ì›¹ì„ ë¹Œë“œí•©ë‹ˆë‹¤. (ì´ì „ ë‹¨ê³„ì—ì„œ base-hrefë¥¼ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ ë¹Œë“œ ì‹œì—ëŠ” í•„ìš” ì—†ìŠµë‹ˆë‹¤)
      - name: Build Flutter web
        run: flutter build web --release

      # 5. <<< ğŸš€ [ì¶”ê°€] ì´ ë‹¨ê³„ë¥¼ ì¶”ê°€í•˜ì—¬ Jekyllì„ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤. ğŸš€ >>>
      - name: Disable Jekyll
        run: touch build/web/.nojekyll

      # 6. ë¹Œë“œëœ ê²°ê³¼ë¬¼ì„ GitHub Pagesì— ë°°í¬í•©ë‹ˆë‹¤.
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v4
        with:
          # ë°°í¬ì— í•„ìš”í•œ GitHub í† í°ì…ë‹ˆë‹¤. ìë™ìœ¼ë¡œ ìƒì„±ë˜ë¯€ë¡œ ìˆ˜ì •í•  í•„ìš” ì—†ìŠµë‹ˆë‹¤.
          github_token: ${{ secrets.GITHUB_TOKEN }}
          # ë¹Œë“œëœ ì›¹ íŒŒì¼ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
          publish_dir: ./build/web

